<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çŒœæ•¸å­—å¤§å°</title>
</head>
<body>
  <h1>çŒœæ•¸å­—éŠæˆ²ï¼ˆ1~100ï¼‰</h1>
  <p>
    ç³»çµ±æœƒç”¢ç”Ÿä¸€å€‹ 1~100 çš„äº‚æ•¸<br>
    æ¯æ¬¡éŒ¯èª¤æ™‚ï¼Œæœƒæç¤ºä½ ã€Œå¤ªå¤§/å¤ªå°ã€èˆ‡ç›®å‰çš„ç¯„åœ<br>
    ä½ æœ€å¤šæœ‰ 5 æ¬¡æ©Ÿæœƒï¼
  </p>

  <input type="number" id="guessInput" placeholder="è¼¸å…¥ä½ çš„çŒœæ¸¬">
  <button id="checkBtn" onclick="checkGuess()">ç¢ºå®šï¼</button>
  <button id="restartBtn" onclick="initGame()" style="display: none;">å†ç©ä¸€æ¬¡</button>

  <p id="message">è«‹è¼¸å…¥æ•¸å­—é–‹å§‹éŠæˆ²</p>
  <p id="chance"></p>
  <div id="log"></div> <!-- ğŸ”¹ ç”¨ä¾†é¡¯ç¤ºæ¯æ¬¡çš„çŒœæ¸¬ç´€éŒ„ -->

  <script>
    let answer;
    let chances;
    let min, max;

    function initGame() {
      answer = Math.floor(Math.random() * 100) + 1;
      chances = 5;
      min = 1;
      max = 100;

      document.getElementById("message").textContent = "è«‹è¼¸å…¥æ•¸å­—é–‹å§‹éŠæˆ²";
      document.getElementById("chance").textContent = "å‰©ä¸‹æ©Ÿæœƒï¼š" + chances + " æ¬¡";
      document.getElementById("guessInput").disabled = false;
      document.getElementById("guessInput").value = "";
      document.getElementById("restartBtn").style.display = "none";
      document.getElementById("checkBtn").style.display = "inline";
      document.getElementById("log").innerHTML = ""; // ğŸ”¸ é‡è¨­ç´€éŒ„
    }

    function checkGuess() {
      const input = document.getElementById("guessInput");
      const message = document.getElementById("message");
      const chance = document.getElementById("chance");
      const restartBtn = document.getElementById("restartBtn");
      const checkBtn = document.getElementById("checkBtn");
      const log = document.getElementById("log");

      let guess = Number(input.value);

      if (input.disabled) return;

      if (isNaN(guess) || guess < min || guess > max) {
        message.textContent = `â— è«‹è¼¸å…¥ ${min} ~ ${max} ä¹‹é–“çš„æ•´æ•¸`;
        return;
      }

      chances--;
      let logMessage = "";

      if (guess === answer) {
        logMessage = `ğŸ‰ ç¬¬${5 - chances}æ¬¡ï¼š${guess} => çŒœå°äº†ï¼ç­”æ¡ˆæ˜¯ ${answer}`;
        message.innerHTML = logMessage;
        input.disabled = true;
        restartBtn.style.display = "inline";
        checkBtn.style.display = "none";
      } else if (chances === 0) {
        if (guess > answer) max = guess;
        if (guess < answer) min = guess;
        logMessage = `ç¬¬${5 - chances}æ¬¡ï¼š${guess} => ${guess > answer ? "å¤ªå¤§äº†" : "å¤ªå°äº†"}ï¼ˆæç¤ºï¼š${min}-${max}ï¼‰`;
        message.innerHTML = `ğŸ’¥ éŠæˆ²çµæŸï¼ä½ å·²ç¶“çŒœäº† 5 æ¬¡ã€‚æ­£ç¢ºç­”æ¡ˆæ˜¯ ${answer}`;
        input.disabled = true;
        restartBtn.style.display = "inline";
        checkBtn.style.display = "none";
      } else if (guess > answer) {
        max = guess;
        logMessage = `ç¬¬${5 - chances}æ¬¡ï¼š${guess} => å¤ªå¤§äº†ï¼ˆæç¤ºï¼š${min}-${max}ï¼‰`;
        message.textContent = logMessage;
      } else {
        min = guess;
        logMessage = `ç¬¬${5 - chances}æ¬¡ï¼š${guess} => å¤ªå°äº†ï¼ˆæç¤ºï¼š${min}-${max}ï¼‰`;
        message.textContent = logMessage;
      }

      if (logMessage) {
        const entry = document.createElement("p");
        entry.textContent = logMessage;
        log.appendChild(entry); // ğŸ”¸ åŠ å…¥ç´€éŒ„
      }

      chance.textContent = `å‰©ä¸‹æ©Ÿæœƒï¼š${chances} æ¬¡`;
      input.value = "";
      input.focus();
    }

    // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–éŠæˆ²
    initGame();
  </script>
</body>
</html>
