<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>猜數字大小</title>
</head>
<body>
  <h1>猜數字遊戲（1~100）</h1>
  <p>請使用亂數產生一個值（1-100）<br>
    每次錯誤時，出現提示如下：<br>
    例如：<br>
    亂數值：60<br>
    第1次：50 => 太小了（提示：50-100）<br>
    第2次：90 => 太大了（提示：50-90）<br>
    第3次：80 => 太大了（提示：50-80）<br>
    第4次：55 => 太小了（提示：55-80）<br>
    第5次：60 => 猜對了！
  </p>

  <input type="number" id="guessInput" placeholder="輸入你的猜測">
  <button onclick="checkGuess()">確定！</button>
  <button onclick="initGame()">再玩一次</button>

  <p id="message">請輸入數字開始遊戲</p>
  <p id="chance"></p>

  <script>
    let answer;
    let chances;
    let min; 
    let max;

    function initGame() {
      answer = Math.floor(Math.random() * 100) + 1;
      chances = 5;
      min = 1;
      max = 100;

      document.getElementById("message").textContent = "請輸入數字開始遊戲";
      document.getElementById("chance").textContent = "剩下機會：" + chances + " 次";
      document.getElementById("guessInput").disabled = false;
      document.getElementById("guessInput").value = "";
    }

    function checkGuess() {
      const input = document.getElementById("guessInput");
      const message = document.getElementById("message");
      const chance = document.getElementById("chance");
      let guess = Number(input.value);

      if (input.disabled) return;

      if (isNaN(guess) || guess < min || guess > max) {
        message.textContent = `❗ 請輸入 ${min} ~ ${max} 之間的整數`;
        return;
      }

      chances--;

      if (guess === answer) {
        message.innerHTML = `🎉 第${5 - chances}次：${guess} => 猜對了！答案是 ${answer}`;
        input.disabled = true;
      } else if (chances === 0) {
        message.innerHTML = `💥 遊戲結束！你已經猜了 5 次。正確答案是 ${answer}`;
        input.disabled = true;
      } else if (guess > answer) {
        max = guess;
        message.textContent = `第${5 - chances}次：${guess} => 太大了（提示：${min}-${max}）`;
      } else {
        min = guess;
        message.textContent = `第${5 - chances}次：${guess} => 太小了（提示：${min}-${max}）`;
      }

      chance.textContent = `剩下機會：${chances} 次`;
      input.value = "";
      input.focus();
    }

    // 初始化遊戲（第一次載入）
    initGame();
  </script>
</body>
</html>
